<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>圣诞快乐</title>
    <style>
        body {
            margin: 0;
            height: 100vh;
            background: linear-gradient(to bottom, #0f2027, #203a43, #2c5364);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
            font-family: Arial, sans-serif;
        }

        .snow {
            position: absolute;
            width: 10px;
            height: 10px;
            background: white;
            border-radius: 50%;
            pointer-events: none;
        }

        .tree {
            margin-top: 50px;
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .tree div {
            width: 0;
            height: 0;
            border-left: 50px solid transparent;
            border-right: 50px solid transparent;
            border-bottom: 100px solid #0f5;
            margin-top: -50px;
            position: relative;
        }

        .tree div:nth-child(2) {
            border-bottom: 120px solid #0d4;
            border-left: 60px solid transparent;
            border-right: 60px solid transparent;
        }

        .tree div:nth-child(3) {
            border-bottom: 140px solid #0c3;
            border-left: 70px solid transparent;
            border-right: 70px solid transparent;
        }

        .trunk {
            width: 40px !important;
            height: 60px !important;
            background: #842;
            border: none !important;
            margin-top: 0 !important;
        }

        .controls {
            position: fixed;
            bottom: 20px;
            display: flex;
            gap: 20px;
        }

        button {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            background: #fff;
            cursor: pointer;
            font-size: 16px;
        }

        .ornament {
            position: absolute;
            width: 15px;
            height: 15px;
            border-radius: 50%;
            background: red;
        }

        h1 {
            color: white;
            text-align: center;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <h1>圣诞快乐!</h1>
    <div class="tree">
        <div></div>
        <div></div>
        <div></div>
        <div class="trunk"></div>
    </div>
    <div class="controls">
        <button onclick="toggleSnow()">开关雪花</button>
        <button onclick="toggleMusic()">开关音乐</button>
        <button onclick="addOrnaments()">添加装饰</button>
    </div>

    <audio id="music" loop>
        <source src="data:audio/midi;base64,..." type="audio/midi">
    </audio>

    <script>
        let snowflakes = [];
        let isSnowing = false;
        let snowInterval;

        function toggleSnow() {
            isSnowing = !isSnowing;
            if (isSnowing) {
                snowInterval = setInterval(createSnowflake, 100);
            } else {
                clearInterval(snowInterval);
                snowflakes.forEach(snow => snow.remove());
                snowflakes = [];
            }
        }

        function createSnowflake() {
            const snow = document.createElement('div');
            snow.className = 'snow';
            snow.style.left = Math.random() * window.innerWidth + 'px';
            snow.style.animationDuration = Math.random() * 3 + 2 + 's';
            snow.style.opacity = Math.random();
            snow.style.transform = `scale(${Math.random()})`;
            document.body.appendChild(snow);
            snowflakes.push(snow);

            const animation = snow.animate([
                { transform: `translate(0, 0)` },
                { transform: `translate(${Math.random() * 200 - 100}px, ${window.innerHeight}px)` }
            ], {
                duration: Math.random() * 3000 + 2000,
                easing: 'linear'
            });

            animation.onfinish = () => {
                snow.remove();
                snowflakes = snowflakes.filter(s => s !== snow);
            };
        }

        function toggleMusic() {
            const music = document.getElementById('music');
            if (music.paused) {
                music.play();
            } else {
                music.pause();
            }
        }

        function addOrnaments() {
            const tree = document.querySelector('.tree');
            const ornament = document.createElement('div');
            ornament.className = 'ornament';
            ornament.style.left = Math.random() * 100 + 'px';
            ornament.style.top = Math.random() * 200 + 'px';
            ornament.style.background = `hsl(${Math.random() * 360}, 100%, 50%)`;
            tree.appendChild(ornament);
        }
    </script>
</body>
</html>
